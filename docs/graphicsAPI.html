<!DOCTYPE html>

<html>

<head>
  <title>
    Fonctions d'affichage
  </title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>

<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
            <div id="jump_page_wrapper">
              <div id="jump_page">
                
                  
                    <a class="source" href="chickendodge.html">
                      chickendodge.js
                    </a>
                    
                  
                    <a class="source" href="components.html">
                      components.js
                    </a>
                    
                  
                    <a class="source" href="components/backgroundLoaderComponent.html">
                      components/backgroundLoaderComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/cameraComponent.html">
                      components/cameraComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/chickenComponent.html">
                      components/chickenComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/chickenSpawnerComponent.html">
                      components/chickenSpawnerComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/colliderComponent.html">
                      components/colliderComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/component.html">
                      components/component.js
                    </a>
                    
                  
                    <a class="source" href="components/compositorComponent.html">
                      components/compositorComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/countdownComponent.html">
                      components/countdownComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/debugDrawCallsComponent.html">
                      components/debugDrawCallsComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/deformationCompositorComponent.html">
                      components/deformationCompositorComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/enablerComponent.html">
                      components/enablerComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/heartComponent.html">
                      components/heartComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/inputComponent.html">
                      components/inputComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/layerComponent.html">
                      components/layerComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/lifeComponent.html">
                      components/lifeComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/playerComponent.html">
                      components/playerComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/positionComponent.html">
                      components/positionComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/rawSpriteComponent.html">
                      components/rawSpriteComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/rectangle.html">
                      components/rectangle.js
                    </a>
                    
                  
                    <a class="source" href="components/refereeComponent.html">
                      components/refereeComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/renderCompositorComponent.html">
                      components/renderCompositorComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/rupeeComponent.html">
                      components/rupeeComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/scoreComponent.html">
                      components/scoreComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/spriteComponent.html">
                      components/spriteComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/spriteSheetComponent.html">
                      components/spriteSheetComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/textSpriteComponent.html">
                      components/textSpriteComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/textureComponent.html">
                      components/textureComponent.js
                    </a>
                    
                  
                    <a class="source" href="components/timerComponent.html">
                      components/timerComponent.js
                    </a>
                    
                  
                    <a class="source" href="eventTrigger.html">
                      eventTrigger.js
                    </a>
                    
                  
                    <a class="source" href="graphicsAPI.html">
                      graphicsAPI.js
                    </a>
                    
                  
                    <a class="source" href="main.html">
                      main.js
                    </a>
                    
                  
                    <a class="source" href="scene.html">
                      scene.js
                    </a>
                    
                  
                    <a class="source" href="sceneObject.html">
                      sceneObject.js
                    </a>
                    
                  
                    <a class="source" href="utils.html">
                      utils.js
                    </a>
                    
              </div>
            </div>
        </li>
      </ul>
      
        <ul class="sections">
          
              
                
                  <li id="section-1">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-1">&#182;</a>
                        </div>
                        
                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>define(() =&gt; {
  <span class="hljs-string">'use strict'</span>;</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-2">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-2">&#182;</a>
                        </div>
                        <h1 id="fonctions-d-affichage">Fonctions d’affichage</h1>
<p>Méthodes nécessaires pour charger et afficher
des images à l’écran.</p>

                    </div>
                    
                  </li>
                  
                
                  <li id="section-3">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-3">&#182;</a>
                        </div>
                        <h2 id="variable-canvas-">Variable <em>canvas</em></h2>
<p>Représente l’élément HTML où est rendu le jeu</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-keyword">let</span> canvas = <span class="hljs-literal">undefined</span>;</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-4">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-4">&#182;</a>
                        </div>
                        <h2 id="variable-ctx-">Variable <em>ctx</em></h2>
<p>Représente le contexte de rendu, où s’exécutent
les commandes pour contrôller l’affichage</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-keyword">let</span> ctx = <span class="hljs-literal">undefined</span>;</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-5">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-5">&#182;</a>
                        </div>
                        <h2 id="variable-images-">Variable <em>images</em></h2>
<p>Comprend une liste des images pré-chargées</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-keyword">const</span> images = {};</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-6">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-6">&#182;</a>
                        </div>
                        <h2 id="m-thode-init-">Méthode <em>init</em></h2>
<p>La méthode d’initialisation prend en paramètre le nom d’un objet de
type <em>canvas</em> de la page web où dessiner. On y extrait
et conserve alors une référence vers le contexte de rendu 3D.
Pour des fins de déboggage, on substitue ici les fonctions de
rendu par des fonctions qui affichent des informations détaillées
si leurs paramètres ne sont pas corrects.</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params">canvasId</span>) </span>{
    <span class="hljs-built_in">module</span>.canvas = canvas = <span class="hljs-built_in">document</span>.getElementById(canvasId);
    <span class="hljs-keyword">const</span> gl = canvas.getContext(<span class="hljs-string">'webgl'</span>);
    <span class="hljs-keyword">if</span> (!gl) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Impossible de récupérer le contexte WebGL!'</span>);
    }
    <span class="hljs-built_in">module</span>.context = ctx = <span class="hljs-built_in">window</span>.WebGLDebugUtils.makeDebugContext(gl);
    <span class="hljs-keyword">return</span> ctx;
  }</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-7">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-7">&#182;</a>
                        </div>
                        <h2 id="m-thode-preloadimage-">Méthode <em>preloadImage</em></h2>
<p>Cette méthode instancie dynamiquement un objet du navigateur
afin qu’il la charge. Ce chargement se faisant de façon
asynchrone, on crée une <a href="http://bluebirdjs.com/docs/why-promises.html">promesse</a>
qui sera <a href="http://bluebirdjs.com/docs/api/new-promise.html">résolue</a>
lorsque l’image sera chargée.</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preloadImage</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">if</span> (images[name]) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve) =&gt; {
      <span class="hljs-keyword">const</span> imgDownload = <span class="hljs-keyword">new</span> Image();
      imgDownload.onload = () =&gt; {
        images[name] = imgDownload;
        resolve();
      };
      imgDownload.src = name;
    });
  }</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-8">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-8">&#182;</a>
                        </div>
                        <h2 id="m-thode-loadimage-">Méthode <em>loadImage</em></h2>
<p>Attends le téléchargement d’une image et la retourne dans
une promesse.</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadImage</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> preloadImage(name)
      .then(() =&gt; {
        <span class="hljs-keyword">return</span> images[name];
      });
  }</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-9">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-9">&#182;</a>
                        </div>
                        <h2 id="m-thode-requestfullscreen-">Méthode <em>requestFullScreen</em></h2>
<p>Méthode utilitaire pour mettre le canvas en plein écran.
Il existe plusieurs méthodes selon le navigateur, donc on
se doit de vérifier l’existence de celles-ci avant de les
appeler.</p>
<p>À noter qu’un script ne peut appeler le basculement en plein
écran que sur une action explicite du joueur.</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requestFullScreen</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> method = canvas.requestFullScreen || canvas.webkitRequestFullScreen || canvas.mozRequestFullScreen || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{};
    method.apply(canvas);
  }</pre></div>
                      </div>
                      
                  </li>
                  
                
                  <li id="section-10">
                    <div class="annotation">
                      
                        <div class="pilwrap ">
                          <a class="pilcrow" href="#section-10">&#182;</a>
                        </div>
                        <p>Méthodes exportées du module <code>graphicsAPI</code>.
On la met dans une variable car on désire y ajouter
les propriétés <code>canvas</code> et <code>context</code> lors de l’appel
de la méthode d’initialisation.</p>

                    </div>
                    
                      <div class="content">
                        <div class='highlight'><pre>  <span class="hljs-keyword">const</span> <span class="hljs-built_in">module</span> = {
    init: init,
    loadImage: loadImage,
    preloadImage: preloadImage,
    requestFullScreen: requestFullScreen,
  };

  <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>;
});</pre></div>
                      </div>
                      
                  </li>
                  
        </ul>
        </div>
</body>

</html>
